# t-wada TDD 実践コマンド

t-wadaのTDD（テスト駆動開発）手法に従って、以下のプロジェクト構造でファイルを作成してください：

**要件/機能**:

## TDD実践の手順

以下のt-wadaのTDD原則に厳密に従ってください：

### 1. TODOリストの作成

まず、実装する機能のTODOリストを作成してください：

- 機能を小さなテスト可能な単位に分割
- 正常系、異常系、境界値を含む
- 実装順序を考慮した優先付け

### 2. Red-Green-Refactorサイクル

各TODOアイテムに対して以下のサイクルを実行：

**Red（失敗するテストを書く）**：

- 最小限の失敗するテストを書く
- テストの意図を明確にする
- 一度に一つのことだけをテストする

**Green（テストを通す最小限の実装）**：

- テストを通すために必要最小限のコードのみ
- 美しくなくても構わない（リファクタリングで改善）
- 早くGreenにすることを優先

**Refactor（重複排除と改善）**：

- テストが通った状態を保ちながら改善
- 重複の排除（DRY原則）
- 意図の明確化

### 3. ファイル構成

以下の構造でファイルを作成してください：

```
src/
  ├── [機能名].ts(x)          # 実装ファイル
  └── [機能名].test.ts(x)     # テストファイル
```

### 4. コーディング規約

**テストコード**：

- テスト名は日本語で意図を明確に表現
- AAA（Arrange-Act-Assert）パターンを使用
- 一つのテストケースでは一つの振る舞い（意図）にフォーカスする（必要なら複数アサーション可）

**実装コード**：

- 関数やクラスは小さく保つ
- 名前で意図を表現
- コメントよりもコードで意図を示す

### 5. ベイビーステップの実践

- 可能な限り小さなステップで進む
- 各ステップでテストが通る状態を保つ
- 逆戻りしやすい小さな変更

### 6. 三角測量の活用

- 複数のテストケースで実装を一般化
- エッジケースも含めた包括的なテスト
- 過度な実装を防ぐための最小限のテスト

## 出力形式

以下の順序でファイルを作成してください：

1. **TODOリスト** - 実装計画の明確化
2. **最初のテストファイル** - 失敗するテストから開始
3. **最初の実装ファイル** - テストを通す最小限の実装
4. **リファクタリング後のファイル** - 改善されたコード
5. **次のステップの提案** - 継続的な改善案。次に落とすべきテスト（Red）案も含めること

各ステップの終わりに`npm run test` でテストがグリーンであることを確認してから次のステップに進んでください。  
各ファイルには適切なコメントを含め、TDDのどのフェーズで作成されたかを明記してください。

### **重要：コメントとドキュメンテーション**

- **TDDコメント（"TDD Red:", "TDD Green:", "TDD Refactor:"など）は最終的には削除してください**
- **すべての関数とクラスには以下のJSDocコメントを付けてください**：
  - `@description` - 関数やクラスの目的と動作の説明
  - `@param` - 各パラメータの型と説明
  - `@returns` - 戻り値の型と説明
  - `@throws` - 投げる可能性のある例外（該当する場合）
  - `@example` - 使用例（複雑な関数の場合）
- **ファイルの最終バージョンではプロダクション品質のコメントのみを残してください**

**JSDocの例**：

````typescript
/**
 * @description ユーザーの年齢から成人かどうかを判定する
 * @param age - ユーザーの年齢
 * @returns 成人の場合true、未成年の場合false
 * @throws {Error} 年齢が負の数の場合
 * @example
 * ```typescript
 * const isAdult = checkAdult(20); // true
 * const isMinor = checkAdult(17); // false
 * ```
 */
function checkAdult(age: number): boolean {
  // ...
}
````

各ステップの終わりに`npm run test` でテストがグリーンであることを確認してから次のステップに進んでください。  
開発中はTDDフェーズを明記したコメントを使用し、完了時には本番用のJSDocに置き換えてください。
